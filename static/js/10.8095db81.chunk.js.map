{"version":3,"file":"static/js/10.8095db81.chunk.js","mappings":"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","sources":["pages/HistoryPage/HistoryPage.styled.jsx","components/HistoryForm/HistoryForm.styled.jsx","components/HistoryForm/HistoryForm.jsx","components/HistoryList/HistoryList.styled.jsx","components/HistoryItem/HistoryItem.styled.jsx","components/HistoryItem/HistoryItem.jsx","components/HistoryList/HistoryList.jsx","pages/HistoryPage/HistoryPage.jsx"],"sourcesContent":["import styled from '@emotion/styled';\r\n\r\nexport const HistoryPageStyled = styled.div`\r\n    padding: 10px 20px 20px 20px;\r\n`;","import styled from '@emotion/styled';\r\n\r\nexport const HistoryFormStyled = styled.form`   \r\n    padding: 24px 40px;\r\n    border: 1px solid #949292;\r\n    border-radius: 10px;\r\n\r\n    background-color: #f3f3f3;\r\n`;\r\n\r\nexport const InputStyled = styled.input`\r\n    width: 70%;\r\n    height: 15px;\r\n    margin-top: 12px;\r\n    margin-bottom: 12px;\r\n    padding: 5px 5px;\r\n\r\n    border-radius: 5px;\r\n    border: 1px solid #c6c4c4;\r\n`;","import React from 'react'\r\nimport { HistoryFormStyled, InputStyled } from './HistoryForm.styled'\r\n\r\nconst HistoryForm = ({email, setEmail, phone, setPhone}) => {\r\n\r\n  return (\r\n    <HistoryFormStyled>\r\n      <label>\r\n        <p>Emale</p>\r\n        <InputStyled\r\n            type='email'\r\n            value={email}\r\n            onChange={e => setEmail(e.currentTarget.value)}\r\n            // required\r\n        />\r\n      </label>\r\n\r\n      <label>\r\n          <p>Phone</p>\r\n          <InputStyled\r\n              type='tel'\r\n              value={phone}\r\n              onChange={e => setPhone(e.currentTarget.value)}\r\n              // required\r\n          />\r\n      </label>\r\n    </HistoryFormStyled>\r\n  )\r\n};\r\n\r\nexport default HistoryForm","import styled from '@emotion/styled';\r\n\r\nexport const HistoryListStyled = styled.div`\r\n    margin-top: 20px;\r\n    padding: 24px 40px;\r\n    border: 1px solid #949292;\r\n    border-radius: 10px;\r\n\r\n    background-color: #f3f3f3;\r\n\r\n    h2 {\r\n        margin-bottom: 20px;\r\n        text-align: center;\r\n        font-size: 30px;\r\n    }\r\n`;\r\n\r\nexport const ListThumbStyled = styled.div`\r\n    display: flex;\r\n    justify-content: space-around;   \r\n`;\r\n\r\nexport const TotalPrice = styled.p`\r\n    font-size: 20px;\r\n    font-weight: 600;\r\n`;","import styled from '@emotion/styled';\r\n\r\nexport const HistoryItemStyled = styled.li`\r\n    display: flex;\r\n    width: 500px;\r\n    padding: 16px 16px;\r\n\r\n    :not(:last-child) {\r\n        margin-bottom: 12px;\r\n    }\r\n\r\n    border: 1px solid #949292;\r\n    border-radius: 5px;\r\n\r\n    background-color: #ffffff;\r\n`;\r\n\r\nexport const ImageThumbStyled = styled.div`\r\n    width: 300px;\r\n    height: 150px;\r\n    margin-right: 30px;\r\n    border-radius: 5px;\r\n    \r\n    overflow: hidden;\r\n\r\n    img {\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n`;\r\n\r\nexport const TitleThumbStyled = styled.div`\r\n   h3 {\r\n    margin-top: 10px;\r\n    margin-bottom: 10px;\r\n   }\r\n`;","import React from 'react'\r\nimport { HistoryItemStyled, ImageThumbStyled, TitleThumbStyled } from './HistoryItem.styled'\r\n\r\nconst HistoryItem = ({dish}) => {\r\n\r\n  const { dishName, price, img, quantity} = dish;\r\n  return (\r\n    <HistoryItemStyled>\r\n      <ImageThumbStyled>\r\n          <img src={img} alt=\"burger\" width={200} height={100} />\r\n      </ImageThumbStyled>\r\n\r\n      <TitleThumbStyled>\r\n          <h3>{dishName} <span>({quantity} pcs)</span></h3>\r\n          <p>Price: <strong>{price} $</strong></p>\r\n      </TitleThumbStyled>      \r\n    </HistoryItemStyled>\r\n  )\r\n}\r\n\r\nexport default HistoryItem","import React from 'react'\r\nimport { HistoryListStyled, ListThumbStyled, TotalPrice } from './HistoryList.styled'\r\nimport HistoryItem from 'components/HistoryItem/HistoryItem'\r\n\r\nconst HistoryList = ({ order }) => {\r\n  \r\n  const total = order.reduce((acc, dish) =>  acc += (dish.price * dish.quantity), 0)\r\n  return (\r\n    <HistoryListStyled>\r\n      <h2>Your order</h2>\r\n      <ListThumbStyled>\r\n        <ul>\r\n          {order?.map(dish => <HistoryItem key={dish._id} dish={dish} />)}\r\n        </ul>    \r\n        <TotalPrice>Total price: {total} $</TotalPrice>\r\n      </ListThumbStyled>\r\n      \r\n    </HistoryListStyled>\r\n  )\r\n}\r\n\r\nexport default HistoryList","import React, { useEffect, useState } from 'react'\r\nimport { HistoryPageStyled } from './HistoryPage.styled'\r\nimport HistoryForm from 'components/HistoryForm/HistoryForm';\r\nimport HistoryList from 'components/HistoryList/HistoryList';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getOrders, getShops } from 'redux/operations';\r\n\r\nconst HistoryPage = () => {\r\n    const [email, setEmail] = useState(\"\");\r\n    const [phone, setPhone] = useState(\"\");\r\n    const [filteredOrders, setFilteredOrders] = useState([]);\r\n    const orders = useSelector(state => state.orders.orders);\r\n    const shopsList = useSelector(state => state.shops.shops);\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        dispatch(getOrders());\r\n        dispatch(getShops())\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const userOrder = orders.reduce((acc, order) => {\r\n            if (order.requisites.email === email || order.requisites.phone === phone) {\r\n                acc.push(order);\r\n            }\r\n            return acc;\r\n        }, []);\r\n\r\n        const res = userOrder?.map(order => {\r\n            const i = shopsList.findIndex(({ _id }) => order.dishList.shopId === _id);           \r\n            const menu = shopsList[i]?.menu;\r\n\r\n            console.log('order', order)\r\n\r\n            const items = order.dishList.dishes?.map(dish => {\r\n                const d = menu?.find(({ _id }) => _id === dish.dishId);\r\n                return { ...d, quantity: dish.quantity }\r\n            });\r\n\r\n            return items;\r\n        })\r\n\r\n        setFilteredOrders(res);\r\n\r\n    }, [email, orders, phone, shopsList]);\r\n\r\n   \r\n\r\n    return (\r\n        <HistoryPageStyled>\r\n            <HistoryForm email={email} setEmail={setEmail} phone={phone} setPhone={setPhone} />\r\n            {filteredOrders?.map((order, i) => <HistoryList key={i} order={order} />)}            \r\n        </HistoryPageStyled>\r\n    )\r\n};\r\n\r\nexport default HistoryPage"],"names":["HistoryPageStyled","styled","_templateObject","_taggedTemplateLiteral","HistoryFormStyled","InputStyled","_templateObject2","_ref","email","setEmail","phone","setPhone","_jsxs","children","_jsx","type","value","onChange","e","currentTarget","HistoryListStyled","ListThumbStyled","TotalPrice","_templateObject3","HistoryItemStyled","ImageThumbStyled","TitleThumbStyled","dish","dishName","price","img","quantity","src","alt","width","height","order","total","reduce","acc","map","HistoryItem","_id","_useState","useState","_useState2","_slicedToArray","_useState3","_useState4","_useState5","_useState6","filteredOrders","setFilteredOrders","orders","useSelector","state","shopsList","shops","dispatch","useDispatch","useEffect","getOrders","getShops","userOrder","requisites","push","res","_shopsList$i","_order$dishList$dishe","i","findIndex","dishList","shopId","menu","console","log","dishes","d","find","_ref2","dishId","_objectSpread","HistoryForm","HistoryList"],"sourceRoot":""}